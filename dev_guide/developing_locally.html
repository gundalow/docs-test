

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Adding modules and plugins locally &mdash; Ansible Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/rtd-ethical-ads.css" type="text/css" />
  <link rel="stylesheet" href="../_static/antsibull-minimal.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/rtd-ethical-ads.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/images/Ansible-Mark-RGB_Black.svg"/>
  

  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/dev_guide/developing_locally.html"/>
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Should you develop a module?" href="developing_modules.html" />
    <link rel="prev" title="Developer Guide" href="index.html" /><!---- extra head elements for Ansible beyond RTD Sphinx Theme --->
<script type="text/javascript" src="https://www.redhat.com/dtm.js"></script>


<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="devel">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->



<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','https://s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

</head>

<body class="wy-body-for-nav">

  <!-- extra body elements for Ansible beyond RTD Sphinx Theme -->
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/Ansible-Mark-RGB_White.svg"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                devel
              </div>
            
          

          <!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <script>
        function switchVersionTo(slug) {
          var current_url_path = window.location.pathname;
          var url_version = current_url_path.search("/devel/") > -1
            ? "/devel/"
            : "/latest/";
          var new_version_url = current_url_path.replace(url_version, "/" + slug + "/");
          window.location.replace(new_version_url);
        }
      </script>
      <select
          class="version-list"
          id="version-list"
          onchange="switchVersionTo(this.value);"
      >
        
        <option
            value="latest"
            
        >
            latest
        </option>
        
        <option
            value="2.9"
            
        >
            2.9
        </option>
        
        <option
            value="devel"
            selected="selected"
        >
            devel
        </option>
        
      </select>
    </div>
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" method="get">
    <input type="text" class="st-default-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Ansible Community Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Ansible</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Adding modules and plugins locally</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modules-and-plugins-what-is-the-difference">Modules and plugins: what is the difference?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-module-locally">Adding a module locally</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-plugin-locally">Adding a plugin locally</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules.html">Should you develop a module?</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general.html">Developing Ansible modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_checklist.html">Contributing your module to an existing Ansible collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_best_practices.html">Conventions, tips, and pitfalls</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_python_3.html">Ansible and Python 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_documenting.html">Module format and documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_windows.html">Windows module development walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_general_aci.html">Developing Cisco ACI modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/aws_guidelines.html">Guidelines for Ansible Amazon AWS module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/openstack_guidelines.html">OpenStack Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/ovirt_dev_guide.html">oVirt Ansible Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/vmware_guidelines.html">Guidelines for VMware module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="platforms/vmware_rest_guidelines.html">Guidelines for VMware REST module development</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules_in_groups.html">Creating a new collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="module_lifecycle.html">The lifecycle of an Ansible module or plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_plugins.html">Developing plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_inventory.html">Developing dynamic inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_core.html">Developing <code class="docutils literal notranslate"><span class="pre">ansible-core</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_program_flow_modules.html">Ansible module architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_api.html">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_rebasing.html">Rebasing a pull request</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_module_utilities.html">Using and developing module utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_collections.html">Developing collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating_roles.html">Migrating Roles to Roles in Collections on Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="collections_galaxy_meta.html">Collection Galaxy metadata structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating_roles.html">Migrating Roles to Roles in Collections on Galaxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview_architecture.html">Ansible architecture</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/cloud_guides.html">Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../network/getting_started/index.html">Network Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/user_guide/index.html">Network Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network/dev_guide/index.html">Network Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../collections/index.html">Collection Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections/all_plugins.html">Indexes of all modules and plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/release_and_maintenance.html">Releases and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/tower.html">Red Hat Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/ansible_roadmap_index.html">Ansible Roadmap</a></li>
</ul>

            
          <!-- extra nav elements for Ansible beyond RTD Sphinx Theme --->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ansible</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Developer Guide</a> &raquo;</li>
        
      <li>Adding modules and plugins locally</li>
    
    
  <li class="wy-breadcrumbs-aside">
          <!-- Ansible-specific additions for modules etc -->
            
              <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/dev_guide/developing_locally.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
            
  </li>
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  <script>
    function startsWith(str, needle) {
      return str.slice(0, needle.length) == needle
    }
    function startsWithOneOf(str, needles) {
      return needles.some(function (needle) {
        return startsWith(str, needle);
      });
    }
    var banner = '';
    var survey_banner =
      '<div id="latest_survey_banner_id" class="admonition important">' +
      '<br>' +
      '<p>' +
        'Please take our ' +
        '<a href="https://www.surveymonkey.co.uk/r/2VWVJY3">survey</a> ' +
        'to help us improve support for collections and roles in GalaxyNG.' +
      '</p>' +
      '<br>' +
      '</div>';
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">' +
                     '<p>This is the testing site for Ansible Documentation. Unless you are reviewing pre-production changes, please visit the <a href="https://docs.ansible.com/ansible/latest/">official documentation website</a>.</p> <p></p>' +
                     '</div>');
    }
    
      // Create a banner
      current_url_path = window.location.pathname;

      var important = false;
      var msg = '<p>';
      if (startsWith(current_url_path, "/ansible-core/")) {
        msg += 'You are reading documentation for Ansible Core, which contains no plugins except for those in ansible.builtin. For documentation of the Ansible package, go to <a href="/ansible/latest">the latest documentation</a>.';
      } else if (startsWithOneOf(current_url_path, ["/ansible/latest/", "/ansible/4/"])) {
        /* temp banner to advertise GalaxyNG survey */
      //  banner += survey_banner;

        msg += 'You are reading the latest community version of the Ansible documentation. Red Hat subscribers, select <b>2.9</b> in the version selection to the left for the most recent Red Hat release.';
      } else if (startsWith(current_url_path, "/ansible/2.9/")) {
        msg += 'You are reading the latest Red Hat released version of the Ansible documentation. Community users can use this version, or select <b>latest</b> from the version selector to the left for the most recent community version.';
      } else if (startsWith(current_url_path, "/ansible/devel/")) {
        /* temp banner to advertise GalaxyNG survey */
      //  banner += survey_banner;

        /* temp banner to advertise survey
        important = true;
        msg += 'Please take our <a href="https://www.surveymonkey.co.uk/r/B9V3CDY">Docs survey</a> before December 31 to help us improve Ansible documentation.';
        */

        msg += 'You are reading the <b>devel</b> version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the latest stable released version.';
      } else {
        msg += 'You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the latest stable released version.';
      }
      msg += '</p>';

      banner += '<div id="banner_id" class="admonition ';
      banner += important ? 'important' : 'caution';
      banner += '">';
      banner += important ? '<br>' : '';
      banner += msg;
      banner += important ? '<br>' : '';
      banner += '</div>';
      document.write(banner);
    
  </script>


  
           <div itemprop="articleBody">
            
  <div class="section" id="adding-modules-and-plugins-locally">
<span id="developing-locally"></span><span id="using-local-modules-and-plugins"></span><h1>Adding modules and plugins locally<a class="headerlink" href="#adding-modules-and-plugins-locally" title="Permalink to this headline">¶</a></h1>
<p>The easiest, quickest, and the most popular way to extend Ansible is to use a local module or a plugin. You can create them or copy existing ones for local use. You can store a local module or plugin on your Ansible control node and share it with your team or organization. You can also share a local plugin or module by including it in a collection or embedding it in a role, then publishing the collection or role on Ansible Galaxy. If you are using roles on Ansible Galaxy, then you are already using local modules and plugins without realizing it.</p>
<p>If you are using an existing module or plugin but Ansible can’t find it, this page is all you need. However, if you want to create a plugin or a module, go to <a class="reference internal" href="developing_plugins.html#developing-plugins"><span class="std std-ref">Developing plugins</span></a> and <a class="reference internal" href="developing_modules_general.html#developing-modules-general"><span class="std std-ref">Developing Ansible modules</span></a> topics and then return to this page to know how to add it locally.</p>
<p>Extending Ansible with local modules and plugins offers lots of shortcuts such as:</p>
<ul class="simple">
<li><p>You can copy other people’s modules and plugins.</p></li>
<li><p>When writing a new module, you can choose any programming language you like.</p></li>
<li><p>You do not have to clone any repositories.</p></li>
<li><p>You do not have to open a pull request.</p></li>
<li><p>You do not have to add tests (though we recommend that you do!).</p></li>
</ul>
<p>To save a local module or plugin such that Ansible can find and use it, add the module or plugin in the appropriate directory (the directories are specified in later parts of this topic).</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#modules-and-plugins-what-is-the-difference" id="id1">Modules and plugins: what is the difference?</a></p></li>
<li><p><a class="reference internal" href="#adding-a-module-locally" id="id2">Adding a module locally</a></p></li>
<li><p><a class="reference internal" href="#adding-a-plugin-locally" id="id3">Adding a plugin locally</a></p></li>
</ul>
</div>
<div class="section" id="modules-and-plugins-what-is-the-difference">
<span id="modules-vs-plugins"></span><h2><a class="toc-backref" href="#id1">Modules and plugins: what is the difference?</a><a class="headerlink" href="#modules-and-plugins-what-is-the-difference" title="Permalink to this headline">¶</a></h2>
<p>If you are looking to add local functionality to Ansible, you might wonder whether you need a module or a plugin. Here is a quick overview to help you decide between the two:</p>
<ul class="simple">
<li><p>Modules are reusable, standalone scripts that can be used by the Ansible API, the <strong class="command">ansible</strong> command, or the <strong class="command">ansible-playbook</strong> command. Modules provide a defined interface. Each module accepts arguments and returns information to Ansible by printing a JSON string to stdout before exiting. Modules execute on the target system (usually that means on a remote system) in separate processes.</p></li>
<li><p><a class="reference internal" href="../plugins/plugins.html#plugins-lookup"><span class="std std-ref">Plugins</span></a> augment Ansible’s core functionality and execute on the control node within the <code class="docutils literal notranslate"><span class="pre">/usr/bin/ansible</span></code> process. Plugins offer options and extensions for the core features of Ansible - transforming data, logging output, connecting to inventory, and more.</p></li>
</ul>
</div>
<div class="section" id="adding-a-module-locally">
<span id="local-modules"></span><h2><a class="toc-backref" href="#id2">Adding a module locally</a><a class="headerlink" href="#adding-a-module-locally" title="Permalink to this headline">¶</a></h2>
<p>Ansible automatically loads all executable files found in certain directories as modules.</p>
<p>For local modules, use the name of the file as the module name: for example, if the module file is <code class="docutils literal notranslate"><span class="pre">~/.ansible/plugins/modules/local_users.py</span></code>, use <code class="docutils literal notranslate"><span class="pre">local_users</span></code> as the module name.</p>
<p>To load your local modules automatically and make them available to all playbooks and roles, add them in any of these locations:</p>
<ul class="simple">
<li><p>any directory added to the <code class="docutils literal notranslate"><span class="pre">ANSIBLE_LIBRARY</span></code> environment variable (<code class="docutils literal notranslate"><span class="pre">$ANSIBLE_LIBRARY</span></code> takes a colon-separated list like <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~/.ansible/plugins/modules/</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/usr/share/ansible/plugins/modules/</span></code></p></li>
</ul>
<p>After you save your module file in one of these locations, Ansible loads it and you can use it in any local task, playbook, or role.</p>
<p>To confirm that <code class="docutils literal notranslate"><span class="pre">my_custom_module</span></code> is available:</p>
<ul class="simple">
<li><p>type <code class="docutils literal notranslate"><span class="pre">ansible</span> <span class="pre">localhost</span> <span class="pre">-m</span> <span class="pre">my_custom_module</span></code>. You should see the output for that module.</p></li>
</ul>
<p>or</p>
<ul class="simple">
<li><p>type <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">module</span> <span class="pre">my_custom_module</span></code>. You should see the documentation for that module.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, the <code class="docutils literal notranslate"><span class="pre">ansible-doc</span></code> command can parse module documentation only from modules written in Python. If you have a module written in a programming language other than Python, please write the documentation in a Python file adjacent to the module file.</p>
</div>
<p>You can limit the availability of your local module. If you want to use a local module only with selected playbooks or only with a single role, load it in one of the following locations:</p>
<ul class="simple">
<li><p>In a selected playbook or playbooks: Store the module in a subdirectory called <code class="docutils literal notranslate"><span class="pre">library</span></code> in the directory that contains those playbooks.</p></li>
<li><p>In a single role: Store the module in a subdirectory called <code class="docutils literal notranslate"><span class="pre">library</span></code> within that role.</p></li>
</ul>
</div>
<div class="section" id="adding-a-plugin-locally">
<span id="local-plugins"></span><span id="distributing-plugins"></span><h2><a class="toc-backref" href="#id3">Adding a plugin locally</a><a class="headerlink" href="#adding-a-plugin-locally" title="Permalink to this headline">¶</a></h2>
<p>Ansible loads plugins automatically too, and loads each type of plugin separately from a directory named for the type of plugin. Here’s the full list of plugin directory names:</p>
<blockquote>
<div><ul class="simple">
<li><p>action_plugins*</p></li>
<li><p>cache_plugins</p></li>
<li><p>callback_plugins</p></li>
<li><p>connection_plugins</p></li>
<li><p>filter_plugins*</p></li>
<li><p>inventory_plugins</p></li>
<li><p>lookup_plugins</p></li>
<li><p>shell_plugins</p></li>
<li><p>strategy_plugins</p></li>
<li><p>test_plugins*</p></li>
<li><p>vars_plugins</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After you add the plugins and verify that they are available for use, you can see the documentation for all the plugins except for the ones marked with an asterisk (*) above.</p>
</div>
<p>To load your local plugins automatically, add them in any of these locations:</p>
<ul class="simple">
<li><p>any directory added to the relevant <code class="docutils literal notranslate"><span class="pre">ANSIBLE_plugin_type_PLUGINS</span></code> environment variable (these variables, such as <code class="docutils literal notranslate"><span class="pre">$ANSIBLE_INVENTORY_PLUGINS</span></code> and <code class="docutils literal notranslate"><span class="pre">$ANSIBLE_VARS_PLUGINS</span></code> take colon-separated lists like <code class="docutils literal notranslate"><span class="pre">$PATH</span></code>)</p></li>
<li><p>the directory named for the correct <code class="docutils literal notranslate"><span class="pre">plugin_type</span></code> within <code class="docutils literal notranslate"><span class="pre">~/.ansible/plugins/</span></code> - for example, <code class="docutils literal notranslate"><span class="pre">~/.ansible/plugins/callback</span></code></p></li>
<li><p>the directory named for the correct <code class="docutils literal notranslate"><span class="pre">plugin_type</span></code> within <code class="docutils literal notranslate"><span class="pre">/usr/share/ansible/plugins/</span></code> - for example, <code class="docutils literal notranslate"><span class="pre">/usr/share/ansible/plugins/action</span></code></p></li>
</ul>
<p>After your plugin file is in one of these locations, Ansible loads it and you can use it in any local module, task, playbook, or role. Alternatively, you can edit your <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file to add directories that contain local plugins. For details about adding directories of local plugins, see <a class="reference internal" href="../reference_appendices/config.html#ansible-configuration-settings"><span class="std std-ref">Ansible Configuration Settings</span></a>.</p>
<p>To confirm that <code class="docutils literal notranslate"><span class="pre">plugins/plugin_type/my_custom_plugin</span></code> is available:</p>
<ul class="simple">
<li><p>type <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">&lt;plugin_type&gt;</span> <span class="pre">my_custom_lookup_plugin</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">ansible-doc</span> <span class="pre">-t</span> <span class="pre">lookup</span> <span class="pre">my_custom_lookup_plugin</span></code>. You should see the documentation for that plugin. This works for all plugin types except the ones marked with <code class="docutils literal notranslate"><span class="pre">*</span></code> in the list above  - see <a class="reference internal" href="../cli/ansible-doc.html#ansible-doc"><span class="std std-ref">ansible-doc</span></a> for more details.</p></li>
</ul>
<p>You can limit the availability of your local plugin. If you want to use a local plugin only with selected playbooks or only with a single role, load it in one of the following locations:</p>
<ul class="simple">
<li><p>In a selected playbook or playbooks: Store the plugin in a subdirectory for the correct <code class="docutils literal notranslate"><span class="pre">plugin_type</span></code> (for example, <code class="docutils literal notranslate"><span class="pre">callback_plugins</span></code> or <code class="docutils literal notranslate"><span class="pre">inventory_plugins</span></code>) in the directory that contains the playbooks.</p></li>
<li><p>In a single role: Store the plugin in a subdirectory for the correct <code class="docutils literal notranslate"><span class="pre">plugin_type</span></code> (for example, <code class="docutils literal notranslate"><span class="pre">cache_plugins</span></code> or <code class="docutils literal notranslate"><span class="pre">strategy_plugins</span></code>) within that role. When shipped as part of a role, the plugin is available as soon as the role is executed.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          

<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="developing_modules.html" class="btn btn-neutral float-right" title="Should you develop a module?" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Developer Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Ansible project contributors.
      <span class="lastupdated">
        Last updated on Jul 21, 2021.
      </span>

    </p>
  </div>
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  <!-- extra footer elements for Ansible beyond RTD Sphinx Theme --->
<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = 'https://js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script>

</body>
</html>