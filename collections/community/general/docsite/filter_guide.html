

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>community.general Filter Guide &mdash; Ansible Documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/ansible.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/rtd-ethical-ads.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/antsibull-minimal.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/css/rtd-ethical-ads.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/images/Ansible-Mark-RGB_Black.svg"/>
  

  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/collections/community/general/docsite/filter_guide.html"/>
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="community.general.doas â€“ Do As user" href="../doas_become.html" />
    <link rel="prev" title="Community.General" href="../index.html" /><!---- extra head elements for Ansible beyond RTD Sphinx Theme --->
<script type="text/javascript" src="https://www.redhat.com/dtm.js"></script>


<!-- <meta class="swiftype" name="published_at" data-type="date" content="2017-12-13" /> -->
<meta class="swiftype" name="version" data-type="string" content="devel">

<!-- Google Tag Manager Data Layer -->
<script>
 dataLayer = [];
</script>
<!-- End Google Tag Manager Data Layer -->



<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','https://s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','yABGvz2N8PwcwBxyfzUc','2.0.0');
</script>

</head>

<body class="wy-body-for-nav">

  <!-- extra body elements for Ansible beyond RTD Sphinx Theme -->
<!-- Google Tag Manager -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
<!-- End Google Tag Manager -->

<div class="DocSite-globalNav ansibleNav">
  <ul>
    <li><a href="https://www.ansible.com/ansiblefest" target="_blank">AnsibleFest</a></li>
    <li><a href="https://www.ansible.com/tower" target="_blank">Products</a></li>
    <li><a href="https://www.ansible.com/community" target="_blank">Community</a></li>
    <li><a href="https://www.ansible.com/webinars-training" target="_blank">Webinars & Training</a></li>
    <li><a href="https://www.ansible.com/blog" target="_blank">Blog</a></li>
  </ul>
</div>

<a class="DocSite-nav" href="/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../../../../_static/images/Ansible-Mark-RGB_White.svg"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Ansible
          

          
          </a>

          
            
            
              <div class="version">
                devel
              </div>
            
          

          <!--- Based on https://github.com/rtfd/sphinx_rtd_theme/pull/438/files -->

<div class="version">
  
    <div class="version-dropdown">
      <script>
        function switchVersionTo(slug) {
          var current_url_path = window.location.pathname;
          var url_version = current_url_path.search("/devel/") > -1
            ? "/devel/"
            : "/latest/";
          var new_version_url = current_url_path.replace(url_version, "/" + slug + "/");
          window.location.replace(new_version_url);
        }
      </script>
      <select
          class="version-list"
          id="version-list"
          onchange="switchVersionTo(this.value);"
      >
        
        <option
            value="latest"
            
        >
            latest
        </option>
        
        <option
            value="2.9"
            
        >
            2.9
        </option>
        
        <option
            value="devel"
            selected="selected"
        >
            devel
        </option>
        
      </select>
    </div>
  
</div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" method="get">
    <input type="text" class="st-default-search-input" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Installation, Upgrade &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation_guide/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../porting_guides/porting_guides.html">Ansible Porting Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_guide/index.html">User Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../community/index.html">Ansible Community Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending Ansible</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev_guide/index.html">Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Common Ansible Scenarios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../scenario_guides/cloud_guides.html">Public Cloud Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scenario_guides/network_guides.html">Network Technology Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../scenario_guides/virt_guides.html">Virtualization and Containerization Guides</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Network Automation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../network/getting_started/index.html">Network Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../network/user_guide/index.html">Network Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../network/dev_guide/index.html">Network Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ansible Galaxy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../galaxy/user_guide.html">Galaxy User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../galaxy/dev_guide.html">Galaxy Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference &amp; Appendices</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Collection Index</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../amazon/index.html">Collections in the Amazon Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ansible/index.html">Collections in the Ansible Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../arista/index.html">Collections in the Arista Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../awx/index.html">Collections in the Awx Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../azure/index.html">Collections in the Azure Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../check_point/index.html">Collections in the Check_point Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../chocolatey/index.html">Collections in the Chocolatey Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cisco/index.html">Collections in the Cisco Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cloudscale_ch/index.html">Collections in the Cloudscale_ch Namespace</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Collections in the Community Namespace</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../aws/index.html">Community.Aws</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../azure/index.html">Community.Azure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../crypto/index.html">Community.Crypto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../digitalocean/index.html">Community.Digitalocean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../docker/index.html">Community.Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fortios/index.html">Community.Fortios</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Community.General</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../index.html#guides">Guides</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#plugin-index">Plugin Index</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../google/index.html">Community.Google</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../grafana/index.html">Community.Grafana</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hashi_vault/index.html">Community.Hashi_Vault</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hrobot/index.html">Community.Hrobot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../kubernetes/index.html">Community.Kubernetes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../kubevirt/index.html">Community.Kubevirt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../libvirt/index.html">Community.Libvirt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mongodb/index.html">Community.Mongodb</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mysql/index.html">Community.Mysql</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/index.html">Community.Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../okd/index.html">Community.Okd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../postgresql/index.html">Community.Postgresql</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../proxysql/index.html">Community.Proxysql</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../rabbitmq/index.html">Community.Rabbitmq</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../routeros/index.html">Community.Routeros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../skydive/index.html">Community.Skydive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sops/index.html">Community.Sops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vmware/index.html">Community.Vmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../windows/index.html">Community.Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../zabbix/index.html">Community.Zabbix</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../containers/index.html">Collections in the Containers Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cyberark/index.html">Collections in the Cyberark Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dellemc/index.html">Collections in the Dellemc Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../f5networks/index.html">Collections in the F5networks Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../fortinet/index.html">Collections in the Fortinet Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../frr/index.html">Collections in the Frr Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../gluster/index.html">Collections in the Gluster Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../google/index.html">Collections in the Google Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hetzner/index.html">Collections in the Hetzner Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hpe/index.html">Collections in the Hpe Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ibm/index.html">Collections in the Ibm Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../infinidat/index.html">Collections in the Infinidat Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../inspur/index.html">Collections in the Inspur Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../junipernetworks/index.html">Collections in the Junipernetworks Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kubernetes/index.html">Collections in the Kubernetes Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mellanox/index.html">Collections in the Mellanox Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netapp/index.html">Collections in the Netapp Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netapp_eseries/index.html">Collections in the Netapp_eseries Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../netbox/index.html">Collections in the Netbox Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ngine_io/index.html">Collections in the Ngine_io Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../openstack/index.html">Collections in the Openstack Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../openvswitch/index.html">Collections in the Openvswitch Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ovirt/index.html">Collections in the Ovirt Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../purestorage/index.html">Collections in the Purestorage Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sensu/index.html">Collections in the Sensu Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../servicenow/index.html">Collections in the Servicenow Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../splunk/index.html">Collections in the Splunk Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../t_systems_mms/index.html">Collections in the T_systems_mms Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../theforeman/index.html">Collections in the Theforeman Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../vyos/index.html">Collections in the Vyos Namespace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../wti/index.html">Collections in the Wti Namespace</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../all_plugins.html">Indexes of all modules and plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/playbooks_keywords.html">Playbook Keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/common_return_values.html">Return Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/config.html">Ansible Configuration Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/general_precedence.html">Controlling how Ansible behaves: precedence rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/YAMLSyntax.html">YAML Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/python_3_support.html">Python 3 Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/interpreter_discovery.html">Interpreter Discovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/release_and_maintenance.html">Releases and maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/test_strategies.html">Testing Strategies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev_guide/testing/sanity/index.html">Sanity Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/module_utils.html">Ansible Reference: Module Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/special_variables.html">Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/tower.html">Red Hat Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/automationhub.html">Ansible Automation Hub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference_appendices/logging.html">Logging Ansible output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Roadmaps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../roadmap/ansible_roadmap_index.html">Ansible Roadmap</a></li>
</ul>

            
          <!-- extra nav elements for Ansible beyond RTD Sphinx Theme --->
<!-- changeable widget links to tower - do not change as image controlled by Ansible-->
<div id="sideBanner">
  <br/>
  <a href="https://www.ansible.com/docs-left?utm_source=docs">
    <img style="border-width:0px;" src="https://cdn2.hubspot.net/hubfs/330046/docs-graphics/ASB-docs-left-rail.png" />
  </a>
  <br/><br/><br/>
</div>

        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Ansible</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Collection Index</a> &raquo;</li>
        
          <li><a href="../../index.html">Collections in the Community Namespace</a> &raquo;</li>
        
          <li><a href="../index.html">Community.General</a> &raquo;</li>
        
      <li>community.general Filter Guide</li>
    
    
  <li class="wy-breadcrumbs-aside">
          <!-- Ansible-specific additions for modules etc -->
            
              <a href="https://github.com/ansible/ansible/edit/devel/docs/docsite/rst/collections/community/general/docsite/filter_guide.rst?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> Edit on GitHub</a>
            
  </li>
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  <script>
    function startsWith(str, needle) {
      return str.slice(0, needle.length) == needle
    }
    function startsWithOneOf(str, needles) {
      return needles.some(function (needle) {
        return startsWith(str, needle);
      });
    }
    var banner = '';
    var survey_banner =
      '<div id="latest_survey_banner_id" class="admonition important">' +
      '<br>' +
      '<p>' +
        'Please take our ' +
        '<a href="https://www.surveymonkey.co.uk/r/2VWVJY3">survey</a> ' +
        'to help us improve support for collections and roles in GalaxyNG.' +
      '</p>' +
      '<br>' +
      '</div>';
    // Create a banner if we're not on the official docs site
    if (location.host == "docs.testing.ansible.com") {
      document.write('<div id="testing_banner_id" class="admonition important">' +
                     '<p>This is the testing site for Ansible Documentation. Unless you are reviewing pre-production changes, please visit the <a href="https://docs.ansible.com/ansible/latest/">official documentation website</a>.</p> <p></p>' +
                     '</div>');
    }
    
      // Create a banner
      current_url_path = window.location.pathname;

      var important = false;
      var msg = '<p>';
      if (startsWith(current_url_path, "/ansible-core/")) {
        msg += 'You are reading documentation for Ansible Core, which contains no plugins except for those in ansible.builtin. For documentation of the Ansible package, go to <a href="/ansible/latest">the latest documentation</a>.';
      } else if (startsWithOneOf(current_url_path, ["/ansible/latest/", "/ansible/4/"])) {
        /* temp banner to advertise GalaxyNG survey */
      //  banner += survey_banner;

        msg += 'You are reading the latest community version of the Ansible documentation. Red Hat subscribers, select <b>2.9</b> in the version selection to the left for the most recent Red Hat release.';
      } else if (startsWith(current_url_path, "/ansible/2.9/")) {
        msg += 'You are reading the latest Red Hat released version of the Ansible documentation. Community users can use this version, or select <b>latest</b> from the version selector to the left for the most recent community version.';
      } else if (startsWith(current_url_path, "/ansible/devel/")) {
        /* temp banner to advertise GalaxyNG survey */
      //  banner += survey_banner;

        /* temp banner to advertise survey
        important = true;
        msg += 'Please take our <a href="https://www.surveymonkey.co.uk/r/B9V3CDY">Docs survey</a> before December 31 to help us improve Ansible documentation.';
        */

        msg += 'You are reading the <b>devel</b> version of the Ansible documentation - this version is not guaranteed stable. Use the version selection to the left if you want the latest stable released version.';
      } else {
        msg += 'You are reading an older version of the Ansible documentation. Use the version selection to the left if you want the latest stable released version.';
      }
      msg += '</p>';

      banner += '<div id="banner_id" class="admonition ';
      banner += important ? 'important' : 'caution';
      banner += '">';
      banner += important ? '<br>' : '';
      banner += msg;
      banner += important ? '<br>' : '';
      banner += '</div>';
      document.write(banner);
    
  </script>


  
           <div itemprop="articleBody">
            
  <div class="section" id="community-general-filter-guide">
<span id="ansible-collections-community-general-docsite-filter-guide"></span><h1><a class="toc-backref" href="#id3">community.general Filter Guide</a><a class="headerlink" href="#community-general-filter-guide" title="Permalink to this headline">Â¶</a></h1>
<p>The <a class="reference internal" href="../index.html#plugins-in-community-general"><span class="std std-ref">community.general collection</span></a> offers several useful filter plugins.</p>
<div class="contents topic" id="topics">
<p class="topic-title">Topics</p>
<ul class="simple">
<li><p><a class="reference internal" href="#community-general-filter-guide" id="id3">community.general Filter Guide</a></p>
<ul>
<li><p><a class="reference internal" href="#paths" id="id4">Paths</a></p></li>
<li><p><a class="reference internal" href="#abstract-transformations" id="id5">Abstract transformations</a></p>
<ul>
<li><p><a class="reference internal" href="#dictionaries" id="id6">Dictionaries</a></p></li>
<li><p><a class="reference internal" href="#grouping" id="id7">Grouping</a></p></li>
<li><p><a class="reference internal" href="#merging-lists-of-dictionaries" id="id8">Merging lists of dictionaries</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#working-with-times" id="id9">Working with times</a></p></li>
<li><p><a class="reference internal" href="#working-with-versions" id="id10">Working with versions</a></p></li>
<li><p><a class="reference internal" href="#creating-identifiers" id="id11">Creating identifiers</a></p>
<ul>
<li><p><a class="reference internal" href="#hashids" id="id12">Hashids</a></p></li>
<li><p><a class="reference internal" href="#random-macs" id="id13">Random MACs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#conversions" id="id14">Conversions</a></p>
<ul>
<li><p><a class="reference internal" href="#parsing-csv-files" id="id15">Parsing CSV files</a></p></li>
<li><p><a class="reference internal" href="#converting-to-json" id="id16">Converting to JSON</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#selecting-json-data-json-queries" id="id17">Selecting JSON data: JSON queries</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="paths">
<h2><a class="toc-backref" href="#id4">Paths</a><a class="headerlink" href="#paths" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">path_join</span></code> filter has been added in ansible-base 2.10. If you want to use this filter, but also need to support Ansible 2.9, you can use <code class="docutils literal notranslate"><span class="pre">community.general</span></code>â€™s <code class="docutils literal notranslate"><span class="pre">path_join</span></code> shim, <code class="docutils literal notranslate"><span class="pre">community.general.path_join</span></code>. This filter redirects to <code class="docutils literal notranslate"><span class="pre">path_join</span></code> for ansible-base 2.10 and ansible-core 2.11 or newer, and re-implements the filter for Ansible 2.9.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="c1"># ansible-base 2.10 or newer:</span>
<span class="nt">path</span><span class="p">:</span> <span class="cp">{{</span> <span class="o">(</span><span class="s1">&#39;/etc&#39;</span><span class="o">,</span> <span class="nv">path</span><span class="o">,</span> <span class="s1">&#39;subdir&#39;</span><span class="o">,</span> <span class="nv">file</span><span class="o">)</span> <span class="o">|</span> <span class="nf">path_join</span> <span class="cp">}}</span>

<span class="c1"># Also works with Ansible 2.9:</span>
<span class="nt">path</span><span class="p">:</span> <span class="cp">{{</span> <span class="o">(</span><span class="s1">&#39;/etc&#39;</span><span class="o">,</span> <span class="nv">path</span><span class="o">,</span> <span class="s1">&#39;subdir&#39;</span><span class="o">,</span> <span class="nv">file</span><span class="o">)</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.path_join</span> <span class="cp">}}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.0.</span></p>
</div>
</div>
<div class="section" id="abstract-transformations">
<h2><a class="toc-backref" href="#id5">Abstract transformations</a><a class="headerlink" href="#abstract-transformations" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="dictionaries">
<h3><a class="toc-backref" href="#id6">Dictionaries</a><a class="headerlink" href="#dictionaries" title="Permalink to this headline">Â¶</a></h3>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">dict_kv</span></code> filter to create a single-entry dictionary with <code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">|</span> <span class="pre">community.general.dict_kv(key)</span></code>:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Create a single-entry dictionary</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">myvar</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.dict_kv</span><span class="o">(</span><span class="s1">&#39;thatsmyvar&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">myvar</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myvalue</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Create a list of dictionaries where the &#39;server&#39; field is taken from a list</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="p p-Indicator">&gt;-</span>
      <span class="cp">{{</span> <span class="nv">myservers</span> <span class="o">|</span> <span class="nf">map</span><span class="o">(</span><span class="s1">&#39;community.general.dict_kv&#39;</span><span class="o">,</span> <span class="s1">&#39;server&#39;</span><span class="o">)</span>
                   <span class="o">|</span> <span class="nf">map</span><span class="o">(</span><span class="s1">&#39;combine&#39;</span><span class="o">,</span> <span class="nv">common_config</span><span class="o">)</span> <span class="cp">}}</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">common_config</span><span class="p">:</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">host</span>
      <span class="nt">database</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
    <span class="nt">myservers</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">server1</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">server2</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span>TASK [Create a single-entry dictionary]  **************************************************
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;thatsmyvar&quot;</span><span class="p">:</span> <span class="s">&quot;myvalue&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

TASK [Create a list of dictionaries where the &#39;server&#39; field is taken from a list]  *******
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;database&quot;</span><span class="p">:</span> <span class="s">&quot;all&quot;</span><span class="p">,</span>
            <span class="nt">&quot;server&quot;</span><span class="p">:</span> <span class="s">&quot;server1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;host&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;database&quot;</span><span class="p">:</span> <span class="s">&quot;all&quot;</span><span class="p">,</span>
            <span class="nt">&quot;server&quot;</span><span class="p">:</span> <span class="s">&quot;server2&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s">&quot;host&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<p>If you need to convert a list of key-value pairs to a dictionary, you can use the <code class="docutils literal notranslate"><span class="pre">dict</span></code> function. Unfortunately, this function cannot be used with <code class="docutils literal notranslate"><span class="pre">map</span></code>. For this, the <code class="docutils literal notranslate"><span class="pre">community.general.dict</span></code> filter can be used:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Create a dictionary with the dict function</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">dict</span><span class="o">([[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">],</span> <span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="o">,</span> <span class="s1">&#39;b&#39;</span><span class="o">]])</span> <span class="cp">}}</span><span class="s">&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Create a dictionary with the community.general.dict filter</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="o">[[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">],</span> <span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="o">,</span> <span class="s1">&#39;b&#39;</span><span class="o">]]</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.dict</span> <span class="cp">}}</span><span class="s">&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Create a list of dictionaries with map and the community.general.dict filter</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="p p-Indicator">&gt;-</span>
      <span class="cp">{{</span> <span class="nv">values</span> <span class="o">|</span> <span class="nf">map</span><span class="o">(</span><span class="s1">&#39;zip&#39;</span><span class="o">,</span> <span class="o">[</span><span class="s1">&#39;k1&#39;</span><span class="o">,</span> <span class="s1">&#39;k2&#39;</span><span class="o">,</span> <span class="s1">&#39;k3&#39;</span><span class="o">])</span>
                <span class="o">|</span> <span class="nf">map</span><span class="o">(</span><span class="s1">&#39;map&#39;</span><span class="o">,</span> <span class="s1">&#39;reverse&#39;</span><span class="o">)</span>
                <span class="o">|</span> <span class="nf">map</span><span class="o">(</span><span class="s1">&#39;community.general.dict&#39;</span><span class="o">)</span> <span class="cp">}}</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">values</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">foo</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">23</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">a</span>
      <span class="p p-Indicator">-</span> <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">42</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">b</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span>TASK [Create a dictionary with the dict function]  ****************************************
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;1&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="s">&quot;b&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

TASK [Create a dictionary with the community.general.dict filter]  ************************
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;1&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;a&quot;</span><span class="p">:</span> <span class="s">&quot;b&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>

TASK [Create a list of dictionaries with map and the community.general.dict filter]  ******
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;k1&quot;</span><span class="p">:</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span>
            <span class="nt">&quot;k2&quot;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
            <span class="nt">&quot;k3&quot;</span><span class="p">:</span> <span class="s">&quot;a&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;k1&quot;</span><span class="p">:</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span>
            <span class="nt">&quot;k2&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
            <span class="nt">&quot;k3&quot;</span><span class="p">:</span> <span class="s">&quot;b&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.0.0.</span></p>
</div>
</div>
<div class="section" id="grouping">
<h3><a class="toc-backref" href="#id7">Grouping</a><a class="headerlink" href="#grouping" title="Permalink to this headline">Â¶</a></h3>
<p>If you have a list of dictionaries, the Jinja2 <code class="docutils literal notranslate"><span class="pre">groupby</span></code> filter allows to group the list by an attribute. This results in a list of <code class="docutils literal notranslate"><span class="pre">(grouper,</span> <span class="pre">list)</span></code> namedtuples, where <code class="docutils literal notranslate"><span class="pre">list</span></code> contains all dictionaries where the selected attribute equals <code class="docutils literal notranslate"><span class="pre">grouper</span></code>. If you know that for every <code class="docutils literal notranslate"><span class="pre">grouper</span></code>, there will be a most one entry in that list, you can use the <code class="docutils literal notranslate"><span class="pre">community.general.groupby_as_dict</span></code> filter to convert the original list into a dictionary which maps <code class="docutils literal notranslate"><span class="pre">grouper</span></code> to the corresponding dictionary.</p>
<p>One example is <code class="docutils literal notranslate"><span class="pre">ansible_facts.mounts</span></code>, which is a list of dictionaries where each has one <code class="docutils literal notranslate"><span class="pre">device</span></code> element to indicate the device which is mounted. Therefore, <code class="docutils literal notranslate"><span class="pre">ansible_facts.mounts</span> <span class="pre">|</span> <span class="pre">community.general.groupby_as_dict('device')</span></code> is a dictionary mapping a device to the mount information:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Output mount facts grouped by device name</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_facts.mounts | community.general.groupby_as_dict(&#39;device&#39;)</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Output mount facts grouped by mount point</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_facts.mounts | community.general.groupby_as_dict(&#39;mount&#39;)</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="k">TASK</span> <span class="p">[</span><span class="l">Output mount facts grouped by device name</span><span class="p">]</span> <span class="nv">******************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;ansible_facts.mounts | community.general.groupby_as_dict(&#39;device&#39;)&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;/dev/sda1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;block_available&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="nt">&quot;block_size&quot;</span><span class="p">:</span> <span class="mi">4096</span><span class="p">,</span>
            <span class="nt">&quot;block_total&quot;</span><span class="p">:</span> <span class="mi">2345</span><span class="p">,</span>
            <span class="nt">&quot;block_used&quot;</span><span class="p">:</span> <span class="mi">345</span><span class="p">,</span>
            <span class="nt">&quot;device&quot;</span><span class="p">:</span> <span class="s">&quot;/dev/sda1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fstype&quot;</span><span class="p">:</span> <span class="s">&quot;ext4&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inode_available&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="nt">&quot;inode_total&quot;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
            <span class="nt">&quot;inode_used&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="nt">&quot;mount&quot;</span><span class="p">:</span> <span class="s">&quot;/boot&quot;</span><span class="p">,</span>
            <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="s">&quot;rw,relatime,data=ordered&quot;</span><span class="p">,</span>
            <span class="nt">&quot;size_available&quot;</span><span class="p">:</span> <span class="mi">56821</span><span class="p">,</span>
            <span class="nt">&quot;size_total&quot;</span><span class="p">:</span> <span class="mi">543210</span><span class="p">,</span>
            <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s">&quot;ab31cade-d9c1-484d-8482-8a4cbee5241a&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;/dev/sda2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;block_available&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
            <span class="nt">&quot;block_size&quot;</span><span class="p">:</span> <span class="mi">4096</span><span class="p">,</span>
            <span class="nt">&quot;block_total&quot;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>
            <span class="nt">&quot;block_used&quot;</span><span class="p">:</span> <span class="mi">11111</span><span class="p">,</span>
            <span class="nt">&quot;device&quot;</span><span class="p">:</span> <span class="s">&quot;/dev/sda2&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fstype&quot;</span><span class="p">:</span> <span class="s">&quot;ext4&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inode_available&quot;</span><span class="p">:</span> <span class="mi">1111</span><span class="p">,</span>
            <span class="nt">&quot;inode_total&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
            <span class="nt">&quot;inode_used&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
            <span class="nt">&quot;mount&quot;</span><span class="p">:</span> <span class="s">&quot;/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="s">&quot;rw,relatime&quot;</span><span class="p">,</span>
            <span class="nt">&quot;size_available&quot;</span><span class="p">:</span> <span class="mi">42143</span><span class="p">,</span>
            <span class="nt">&quot;size_total&quot;</span><span class="p">:</span> <span class="mi">543210</span><span class="p">,</span>
            <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s">&quot;abcdef01-2345-6789-0abc-def012345678&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">TASK</span> <span class="p">[</span><span class="l">Output mount facts grouped by mount point</span><span class="p">]</span> <span class="nv">******************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;ansible_facts.mounts | community.general.groupby_as_dict(&#39;mount&#39;)&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;/&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;block_available&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
            <span class="nt">&quot;block_size&quot;</span><span class="p">:</span> <span class="mi">4096</span><span class="p">,</span>
            <span class="nt">&quot;block_total&quot;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>
            <span class="nt">&quot;block_used&quot;</span><span class="p">:</span> <span class="mi">11111</span><span class="p">,</span>
            <span class="nt">&quot;device&quot;</span><span class="p">:</span> <span class="s">&quot;/dev/sda2&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fstype&quot;</span><span class="p">:</span> <span class="s">&quot;ext4&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inode_available&quot;</span><span class="p">:</span> <span class="mi">1111</span><span class="p">,</span>
            <span class="nt">&quot;inode_total&quot;</span><span class="p">:</span> <span class="mi">1234</span><span class="p">,</span>
            <span class="nt">&quot;inode_used&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
            <span class="nt">&quot;mount&quot;</span><span class="p">:</span> <span class="s">&quot;/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="s">&quot;rw,relatime&quot;</span><span class="p">,</span>
            <span class="nt">&quot;size_available&quot;</span><span class="p">:</span> <span class="mi">42143</span><span class="p">,</span>
            <span class="nt">&quot;size_total&quot;</span><span class="p">:</span> <span class="mi">543210</span><span class="p">,</span>
            <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s">&quot;bdf50b7d-4859-40af-8665-c637ee7a7808&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;/boot&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;block_available&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="nt">&quot;block_size&quot;</span><span class="p">:</span> <span class="mi">4096</span><span class="p">,</span>
            <span class="nt">&quot;block_total&quot;</span><span class="p">:</span> <span class="mi">2345</span><span class="p">,</span>
            <span class="nt">&quot;block_used&quot;</span><span class="p">:</span> <span class="mi">345</span><span class="p">,</span>
            <span class="nt">&quot;device&quot;</span><span class="p">:</span> <span class="s">&quot;/dev/sda1&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fstype&quot;</span><span class="p">:</span> <span class="s">&quot;ext4&quot;</span><span class="p">,</span>
            <span class="nt">&quot;inode_available&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
            <span class="nt">&quot;inode_total&quot;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
            <span class="nt">&quot;inode_used&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="nt">&quot;mount&quot;</span><span class="p">:</span> <span class="s">&quot;/boot&quot;</span><span class="p">,</span>
            <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="s">&quot;rw,relatime,data=ordered&quot;</span><span class="p">,</span>
            <span class="nt">&quot;size_available&quot;</span><span class="p">:</span> <span class="mi">56821</span><span class="p">,</span>
            <span class="nt">&quot;size_total&quot;</span><span class="p">:</span> <span class="mi">543210</span><span class="p">,</span>
            <span class="nt">&quot;uuid&quot;</span><span class="p">:</span> <span class="s">&quot;ab31cade-d9c1-484d-8482-8a4cbee5241a&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="merging-lists-of-dictionaries">
<h3><a class="toc-backref" href="#id8">Merging lists of dictionaries</a><a class="headerlink" href="#merging-lists-of-dictionaries" title="Permalink to this headline">Â¶</a></h3>
<p>If you have two lists of dictionaries and want to combine them into a list of merged dictionaries, where two dictionaries are merged if they coincide in one attribute, you can use the <code class="docutils literal notranslate"><span class="pre">lists_mergeby</span></code> filter.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Merge two lists by common attribute &#39;name&#39;</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">list1 | community.general.lists_mergeby(list2, &#39;name&#39;)</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">list1</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foo</span>
        <span class="nt">extra</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bar</span>
        <span class="nt">extra</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">meh</span>
        <span class="nt">extra</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">list2</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">foo</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/foo</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">baz</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/bazzz</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span>TASK [Merge two lists by common attribute &#39;name&#39;]  ****************************************
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;list1 | community.general.lists_mergeby(list2, &#39;name&#39;)&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;extra&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;bar&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;baz&quot;</span><span class="p">,</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s">&quot;/bazzz&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;extra&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s">&quot;/foo&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;extra&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s">&quot;meh&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="working-with-times">
<h2><a class="toc-backref" href="#id9">Working with times</a><a class="headerlink" href="#working-with-times" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">to_time_unit</span></code> filter allows to convert times from a human-readable string to a unit. For example, <code class="docutils literal notranslate"><span class="pre">'4h</span> <span class="pre">30min</span> <span class="pre">12second'</span> <span class="pre">|</span> <span class="pre">community.general.to_time_unit('hour')</span></code> gives the number of hours that correspond to 4 hours, 30 minutes and 12 seconds.</p>
<p>There are shorthands to directly convert to various units, like <code class="docutils literal notranslate"><span class="pre">to_hours</span></code>, <code class="docutils literal notranslate"><span class="pre">to_minutes</span></code>, <code class="docutils literal notranslate"><span class="pre">to_seconds</span></code>, and so on. The following table lists all units that can be used:</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Units</span><a class="headerlink" href="#id2" title="Permalink to this table">Â¶</a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Unit name</p></th>
<th class="head"><p>Unit value in seconds</p></th>
<th class="head"><p>Unit strings for filter</p></th>
<th class="head"><p>Shorthand filter</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Millisecond</p></td>
<td><p>1/1000 second</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ms</span></code>, <code class="docutils literal notranslate"><span class="pre">millisecond</span></code>, <code class="docutils literal notranslate"><span class="pre">milliseconds</span></code>, <code class="docutils literal notranslate"><span class="pre">msec</span></code>, <code class="docutils literal notranslate"><span class="pre">msecs</span></code>, <code class="docutils literal notranslate"><span class="pre">msecond</span></code>, <code class="docutils literal notranslate"><span class="pre">mseconds</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_milliseconds</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Second</p></td>
<td><p>1 second</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">sec</span></code>, <code class="docutils literal notranslate"><span class="pre">secs</span></code>, <code class="docutils literal notranslate"><span class="pre">second</span></code>, <code class="docutils literal notranslate"><span class="pre">seconds</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_seconds</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Minute</p></td>
<td><p>60 seconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">mins</span></code>, <code class="docutils literal notranslate"><span class="pre">minute</span></code>, <code class="docutils literal notranslate"><span class="pre">minutes</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_minutes</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Hour</p></td>
<td><p>60*60 seconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">hour</span></code>, <code class="docutils literal notranslate"><span class="pre">hours</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_hours</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Day</p></td>
<td><p>24*60*60 seconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">day</span></code>, <code class="docutils literal notranslate"><span class="pre">days</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_days</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Week</p></td>
<td><p>7*24*60*60 seconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">w</span></code>, <code class="docutils literal notranslate"><span class="pre">week</span></code>, <code class="docutils literal notranslate"><span class="pre">weeks</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_weeks</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Month</p></td>
<td><p>30*24*60*60 seconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">mo</span></code>, <code class="docutils literal notranslate"><span class="pre">month</span></code>, <code class="docutils literal notranslate"><span class="pre">months</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_months</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Year</p></td>
<td><p>365*24*60*60 seconds</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">year</span></code>, <code class="docutils literal notranslate"><span class="pre">years</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">to_years</span></code></p></td>
</tr>
</tbody>
</table>
<p>Note that months and years are using a simplified representation: a month is 30 days, and a year is 365 days. If you need different definitions of months or years, you can pass them as keyword arguments. For example, if you want a year to be 365.25 days, and a month to be 30.5 days, you can write <code class="docutils literal notranslate"><span class="pre">'11months</span> <span class="pre">4'</span> <span class="pre">|</span> <span class="pre">community.general.to_years(year=365.25,</span> <span class="pre">month=30.5)</span></code>. These keyword arguments can be specified to <code class="docutils literal notranslate"><span class="pre">to_time_unit</span></code> and to all shorthand filters.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Convert string to seconds</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="s1">&#39;30h 20m 10s 123ms&#39;</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.to_time_unit</span><span class="o">(</span><span class="s1">&#39;seconds&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Convert string to hours</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="s1">&#39;30h 20m 10s 123ms&#39;</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.to_hours</span> <span class="cp">}}</span><span class="s">&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Convert string to years (using 365.25 days == 1 year)</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="s1">&#39;400d 15h&#39;</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.to_years</span><span class="o">(</span><span class="nv">year</span><span class="o">=</span><span class="m">365.25</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="k">TASK</span> <span class="p">[</span><span class="l">Convert string to seconds</span><span class="p">]</span> <span class="nv">**********************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;109210.123&quot;</span>
<span class="p">}</span>

<span class="k">TASK</span> <span class="p">[</span><span class="l">Convert string to hours</span><span class="p">]</span> <span class="nv">************************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;30.336145277778&quot;</span>
<span class="p">}</span>

<span class="k">TASK</span> <span class="p">[</span><span class="l">Convert string to years (using 365.25 days == 1 year)</span><span class="p">]</span> <span class="nv">******************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;1.096851471595&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-versions">
<h2><a class="toc-backref" href="#id10">Working with versions</a><a class="headerlink" href="#working-with-versions" title="Permalink to this headline">Â¶</a></h2>
<p>If you need to sort a list of version numbers, the Jinja <code class="docutils literal notranslate"><span class="pre">sort</span></code> filter is problematic. Since it sorts lexicographically, <code class="docutils literal notranslate"><span class="pre">2.10</span></code> will come before <code class="docutils literal notranslate"><span class="pre">2.9</span></code>. To treat version numbers correctly, you can use the <code class="docutils literal notranslate"><span class="pre">version_sort</span></code> filter:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Sort list by version number</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ansible_versions | community.general.version_sort</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">ansible_versions</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&#39;2.8.0&#39;</span>
      <span class="p p-Indicator">-</span> <span class="s">&#39;2.11.0&#39;</span>
      <span class="p p-Indicator">-</span> <span class="s">&#39;2.7.0&#39;</span>
      <span class="p p-Indicator">-</span> <span class="s">&#39;2.10.0&#39;</span>
      <span class="p p-Indicator">-</span> <span class="s">&#39;2.9.0&#39;</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="k">TASK</span> <span class="p">[</span><span class="l">Sort list by version number</span><span class="p">]</span> <span class="nv">********************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;ansible_versions | community.general.version_sort&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s">&quot;2.7.0&quot;</span><span class="p">,</span>
        <span class="s">&quot;2.8.0&quot;</span><span class="p">,</span>
        <span class="s">&quot;2.9.0&quot;</span><span class="p">,</span>
        <span class="s">&quot;2.10.0&quot;</span><span class="p">,</span>
        <span class="s">&quot;2.11.0&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-identifiers">
<h2><a class="toc-backref" href="#id11">Creating identifiers</a><a class="headerlink" href="#creating-identifiers" title="Permalink to this headline">Â¶</a></h2>
<p>The following filters allow to create identifiers.</p>
<div class="section" id="hashids">
<h3><a class="toc-backref" href="#id12">Hashids</a><a class="headerlink" href="#hashids" title="Permalink to this headline">Â¶</a></h3>
<p><a class="reference external" href="https://hashids.org/">Hashids</a> allow to convert sequences of integers to short unique string identifiers. This filter needs the <a class="reference external" href="https://pypi.org/project/hashids/">hashids Python library</a> installed on the controller.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;Create</span><span class="nv"> </span><span class="s">hashid&quot;</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="o">[</span><span class="m">1234</span><span class="o">,</span> <span class="m">5</span><span class="o">,</span> <span class="m">6</span><span class="o">]</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.hashids_encode</span> <span class="cp">}}</span><span class="s">&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;Decode</span><span class="nv"> </span><span class="s">hashid&quot;</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="s1">&#39;jm2Cytn&#39;</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.hashids_decode</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="k">TASK</span> <span class="p">[</span><span class="l">Create hashid</span><span class="p">]</span> <span class="nv">**********************************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;jm2Cytn&quot;</span>
<span class="p">}</span>

<span class="k">TASK</span> <span class="p">[</span><span class="l">Decode hashid</span><span class="p">]</span> <span class="nv">**********************************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">1234</span><span class="p">,</span>
        <span class="mi">5</span><span class="p">,</span>
        <span class="mi">6</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The hashids filters accept keyword arguments to allow fine-tuning the hashids generated:</p>
<dl class="field-list simple">
<dt class="field-odd">salt</dt>
<dd class="field-odd"><p>String to use as salt when hashing.</p>
</dd>
<dt class="field-even">alphabet</dt>
<dd class="field-even"><p>String of 16 or more unique characters to produce a hash.</p>
</dd>
<dt class="field-odd">min_length</dt>
<dd class="field-odd"><p>Minimum length of hash produced.</p>
</dd>
</dl>
</div>
<div class="section" id="random-macs">
<h3><a class="toc-backref" href="#id13">Random MACs</a><a class="headerlink" href="#random-macs" title="Permalink to this headline">Â¶</a></h3>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">random_mac</span></code> filter to complete a partial <a class="reference external" href="https://en.wikipedia.org/wiki/MAC_address">MAC address</a> to a random 6-byte MAC address.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;Create</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">random</span><span class="nv"> </span><span class="s">MAC</span><span class="nv"> </span><span class="s">starting</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">ff:&quot;</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="s1">&#39;FF&#39;</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.random_mac</span> <span class="cp">}}</span><span class="s">&quot;</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;Create</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">random</span><span class="nv"> </span><span class="s">MAC</span><span class="nv"> </span><span class="s">starting</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">00:11:22:&quot;</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="s1">&#39;00:11:22&#39;</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.random_mac</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="k">TASK</span> <span class="p">[</span><span class="l">Create a random MAC starting with ff:</span><span class="p">]</span> <span class="nv">**********************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;ff:69:d3:78:7f:b4&quot;</span>
<span class="p">}</span>

<span class="k">TASK</span> <span class="p">[</span><span class="l">Create a random MAC starting with 00:11:22:</span><span class="p">]</span> <span class="nv">****************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="s">&quot;00:11:22:71:5d:3b&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also initialize the random number generator from a seed to create random-but-idempotent MAC addresses:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;</span><span class="cp">{{</span> <span class="s1">&#39;52:54:00&#39;</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.random_mac</span><span class="o">(</span><span class="nv">seed</span><span class="o">=</span><span class="nv">inventory_hostname</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conversions">
<h2><a class="toc-backref" href="#id14">Conversions</a><a class="headerlink" href="#conversions" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="parsing-csv-files">
<h3><a class="toc-backref" href="#id15">Parsing CSV files</a><a class="headerlink" href="#parsing-csv-files" title="Permalink to this headline">Â¶</a></h3>
<p>Ansible offers the <a class="reference internal" href="../read_csv_module.html#ansible-collections-community-general-read-csv-module"><span class="std std-ref">community.general.read_csv module</span></a> to read CSV files. Sometimes you need to convert strings to CSV files instead. For this, the <code class="docutils literal notranslate"><span class="pre">from_csv</span></code> filter exists.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;Parse</span><span class="nv"> </span><span class="s">CSV</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">string&quot;</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">csv_string</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.from_csv</span> <span class="cp">}}</span><span class="s">&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">csv_string</span><span class="p">:</span> <span class="p p-Indicator">|</span>
      <span class="no">foo,bar,baz</span>
      <span class="no">1,2,3</span>
      <span class="no">you,this,then</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="k">TASK</span> <span class="p">[</span><span class="l">Parse CSV from string</span><span class="p">]</span> <span class="nv">**************************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;bar&quot;</span><span class="p">:</span> <span class="s">&quot;2&quot;</span><span class="p">,</span>
            <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="s">&quot;3&quot;</span><span class="p">,</span>
            <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;1&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;bar&quot;</span><span class="p">:</span> <span class="s">&quot;this&quot;</span><span class="p">,</span>
            <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="s">&quot;then&quot;</span><span class="p">,</span>
            <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="s">&quot;you&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">from_csv</span></code> filter has several keyword arguments to control its behavior:</p>
<dl class="field-list simple">
<dt class="field-odd">dialect</dt>
<dd class="field-odd"><p>Dialect of the CSV file. Default is <code class="docutils literal notranslate"><span class="pre">excel</span></code>. Other possible choices are <code class="docutils literal notranslate"><span class="pre">excel-tab</span></code> and <code class="docutils literal notranslate"><span class="pre">unix</span></code>. If one of <code class="docutils literal notranslate"><span class="pre">delimiter</span></code>, <code class="docutils literal notranslate"><span class="pre">skipinitialspace</span></code> or <code class="docutils literal notranslate"><span class="pre">strict</span></code> is specified, <code class="docutils literal notranslate"><span class="pre">dialect</span></code> is ignored.</p>
</dd>
<dt class="field-even">fieldnames</dt>
<dd class="field-even"><p>A set of column names to use. If not provided, the first line of the CSV is assumed to contain the column names.</p>
</dd>
<dt class="field-odd">delimiter</dt>
<dd class="field-odd"><p>Sets the delimiter to use. Default depends on the dialect used.</p>
</dd>
<dt class="field-even">skipinitialspace</dt>
<dd class="field-even"><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to ignore space directly after the delimiter. Default depends on the dialect used (usually <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
<dt class="field-odd">strict</dt>
<dd class="field-odd"><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to error out on invalid CSV input.</p>
</dd>
</dl>
</div>
<div class="section" id="converting-to-json">
<h3><a class="toc-backref" href="#id16">Converting to JSON</a><a class="headerlink" href="#converting-to-json" title="Permalink to this headline">Â¶</a></h3>
<p><a class="reference external" href="https://pypi.org/project/jc/">JC</a> is a CLI tool and Python library which allows to interpret output of various CLI programs as JSON. It is also available as a filter in community.general. This filter needs the <a class="reference external" href="https://pypi.org/project/jc/">jc Python library</a> installed on the controller.</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Run &#39;ls&#39; to list files in /</span>
  <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ls /</span>
  <span class="nt">register</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">result</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Parse the ls output</span>
  <span class="nt">debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">result.stdout</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.jc</span><span class="o">(</span><span class="s1">&#39;ls&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-ansible-output notranslate"><div class="highlight"><pre><span></span><span class="k">TASK</span> <span class="p">[</span><span class="l">Run &#39;ls&#39; to list files in /</span><span class="p">]</span> <span class="nv">********************************************************</span>
<span class="k">changed</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span>

<span class="k">TASK</span> <span class="p">[</span><span class="l">Parse the ls output</span><span class="p">]</span> <span class="nv">****************************************************************</span>
<span class="k">ok</span><span class="p">:</span> <span class="p">[</span><span class="nv">localhost</span><span class="p">]</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nt">&quot;msg&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;bin&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;boot&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;dev&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;etc&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;home&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;lib&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;proc&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;root&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;run&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;filename&quot;</span><span class="p">:</span> <span class="s">&quot;tmp&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="selecting-json-data-json-queries">
<span id="ansible-collections-community-general-docsite-json-query-filter"></span><h2><a class="toc-backref" href="#id17">Selecting JSON data: JSON queries</a><a class="headerlink" href="#selecting-json-data-json-queries" title="Permalink to this headline">Â¶</a></h2>
<p>To select a single element or a data subset from a complex data structure in JSON format (for example, Ansible facts), use the <code class="docutils literal notranslate"><span class="pre">json_query</span></code> filter.  The <code class="docutils literal notranslate"><span class="pre">json_query</span></code> filter lets you query a complex JSON structure and iterate over it using a loop structure.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must manually install the <strong>jmespath</strong> dependency on the Ansible controller before using this filter. This filter is built upon <strong>jmespath</strong>, and you can use the same syntax. For examples, see <a class="reference external" href="http://jmespath.org/examples.html">jmespath examples</a>.</p>
</div>
<p>Consider this data structure:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">{</span>
    <span class="s">&quot;domain_definition&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
        <span class="s">&quot;domain&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span>
            <span class="s">&quot;cluster&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster1&quot;</span>
                <span class="p p-Indicator">},</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster2&quot;</span>
                <span class="p p-Indicator">}</span>
            <span class="p p-Indicator">],</span>
            <span class="s">&quot;server&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;server11&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;cluster&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster1&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;port&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;8080&quot;</span>
                <span class="p p-Indicator">},</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;server12&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;cluster&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster1&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;port&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;8090&quot;</span>
                <span class="p p-Indicator">},</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;server21&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;cluster&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster2&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;port&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;9080&quot;</span>
                <span class="p p-Indicator">},</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;server22&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;cluster&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster2&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;port&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;9090&quot;</span>
                <span class="p p-Indicator">}</span>
            <span class="p p-Indicator">],</span>
            <span class="s">&quot;library&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;lib1&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;target&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster1&quot;</span>
                <span class="p p-Indicator">},</span>
                <span class="p p-Indicator">{</span>
                    <span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;lib2&quot;</span><span class="p p-Indicator">,</span>
                    <span class="s">&quot;target&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;cluster2&quot;</span>
                <span class="p p-Indicator">}</span>
            <span class="p p-Indicator">]</span>
        <span class="p p-Indicator">}</span>
    <span class="p p-Indicator">}</span>
<span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>To extract all clusters from this structure, you can use the following query:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all cluster names</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">item</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="s1">&#39;domain.cluster[*].name&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>To extract all server names:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all server names</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">item</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="s1">&#39;domain.server[*].name&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<p>To extract ports from cluster1:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all ports from cluster1</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">item</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="nv">server_name_cluster1_query</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">server_name_cluster1_query</span><span class="p">:</span> <span class="s">&quot;domain.server[?cluster==&#39;cluster1&#39;].port&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use a variable to make the query more readable.</p>
</div>
<p>To print out the ports from cluster1 in a comma separated string:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all ports from cluster1 as a string</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="s1">&#39;domain.server[?cluster==`cluster1`].port&#39;</span><span class="o">)</span> <span class="o">|</span> <span class="nf">join</span><span class="o">(</span><span class="s1">&#39;, &#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the example above, quoting literals using backticks avoids escaping quotes and maintains readability.</p>
</div>
<p>You can use YAML <a class="reference external" href="https://yaml.org/spec/current.html#id2534365">single quote escaping</a>:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all ports from cluster1</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">item</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="s1">&#39;domain.server[?cluster==&#39;&#39;cluster1&#39;&#39;].port&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Escaping single quotes within single quotes in YAML is done by doubling the single quote.</p>
</div>
<p>To get a hash map with all ports and names of a cluster:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all server ports and names from cluster1</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">var</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">item</span>
  <span class="nt">loop</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="nv">server_name_cluster1_query</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">server_name_cluster1_query</span><span class="p">:</span> <span class="s">&quot;domain.server[?cluster==&#39;cluster2&#39;].{name:</span><span class="nv"> </span><span class="s">name,</span><span class="nv"> </span><span class="s">port:</span><span class="nv"> </span><span class="s">port}&quot;</span>
</pre></div>
</div>
<p>To extract ports from all clusters with name starting with â€˜server1â€™:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all ports from cluster1</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">to_json</span> <span class="o">|</span> <span class="nf">from_json</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="nv">server_name_query</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">server_name_query</span><span class="p">:</span> <span class="s">&quot;domain.server[?starts_with(name,&#39;server1&#39;)].port&quot;</span>
</pre></div>
</div>
<p>To extract ports from all clusters with name containing â€˜server1â€™:</p>
<div class="highlight-yaml+jinja notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Display all ports from cluster1</span>
  <span class="nt">ansible.builtin.debug</span><span class="p">:</span>
    <span class="nt">msg</span><span class="p">:</span> <span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">domain_definition</span> <span class="o">|</span> <span class="nf">to_json</span> <span class="o">|</span> <span class="nf">from_json</span> <span class="o">|</span> <span class="nf">community</span><span class="nv">.general.json_query</span><span class="o">(</span><span class="nv">server_name_query</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span>
  <span class="nt">vars</span><span class="p">:</span>
    <span class="nt">server_name_query</span><span class="p">:</span> <span class="s">&quot;domain.server[?contains(name,&#39;server1&#39;)].port&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>while using <code class="docutils literal notranslate"><span class="pre">starts_with</span></code> and <code class="docutils literal notranslate"><span class="pre">contains</span></code>, you have to use `` to_json | from_json `` filter for correct parsing of data structure.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          

<footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../doas_become.html" class="btn btn-neutral float-right" title="community.general.doas â€“ Do As user" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../index.html" class="btn btn-neutral float-left" title="Community.General" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Ansible project contributors.
      <span class="lastupdated">
        Last updated on Jul 21, 2021.
      </span>

    </p>
  </div>
   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  <!-- extra footer elements for Ansible beyond RTD Sphinx Theme --->
<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
      (function(d,s,i,r) {
      if (d.getElementById(i)){return;}
      var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
      n.id=i;n.src = 'https://js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
      e.parentNode.insertBefore(n, e);
      })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->
<script type="text/javascript">
if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
  _satellite.pageBottom();
}
</script>

</body>
</html>